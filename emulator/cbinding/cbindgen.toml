# Licensed under the Apache-2.0 license.

# cbindgen configuration for emulator C bindings

language = "C"
style = "both"
include_guard = "EMULATOR_CBINDING_H"
pragma_once = true
autogen_warning = """
/*++

Licensed under the Apache-2.0 license.

Warning, this file is autogenerated by cbindgen. Don't modify this manually.

--*/
"""
include_version = true
namespace = ""
tab_width = 4
line_length = 100
documentation = true
documentation_style = "doxy"
usize_is_size_t = true
cpp_compat = true

[defines]
"feature = serde" = "CBINDGEN_SERDE"

[export]
exclude = [
    "Option_CExternalReadCallback",
    "Option_CExternalWriteCallback"
]
include = [
    "EmulatorError",
    "CStepAction", 
    "CEmulator",
    "CEmulatorConfig",
    "emulator_get_size",
    "emulator_get_alignment", 
    "emulator_init",
    "emulator_step",
    "emulator_destroy",
    "emulator_get_uart_output",
    "emulator_get_uart_output_streaming",
    "emulator_send_uart_char",
    "emulator_uart_rx_ready",
    "emulator_run_gdb_server",
    "emulator_is_gdb_mode",
    "emulator_get_gdb_port",
    "emulator_get_pc",
    "emulator_trigger_exit",
    "example_external_read_callback",
    "example_external_write_callback",
    "CExternalReadCallback",
    "CExternalWriteCallback"
]

[export.rename]

[layout]
packed = "EMULATOR_PACKED"
aligned_n = "EMULATOR_ALIGN"

[fn]
rename_args = "GeckoCase"
must_use = "EMULATOR_MUST_USE"
no_return = "EMULATOR_NO_RETURN"

[struct]
rename_fields = "GeckoCase"
must_use = "EMULATOR_MUST_USE"

[enum]
rename_variants = "GeckoCase"
must_use = "EMULATOR_MUST_USE"

[const]
allow_static_const = true
allow_constexpr = false

[macro_expansion]
bitflags = true
